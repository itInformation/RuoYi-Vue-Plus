<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="org.dromara.system.mapper.SysVipLevelMapper">
    <select id="findMatchLevel" resultType="org.dromara.system.domain.SysVipLevel">
        SELECT level_id   AS ruleId,
               type_id    AS typeId,
               level_name AS levelName,
               min_exp    AS minPoints,
               max_exp    AS maxPoints,
               privileges
        FROM sys_vip_level
        WHERE type_id = #{typeId}
          AND min_exp &lt;= #{currentPoints}
          AND (max_exp &gt;= #{currentPoints}
           OR max_exp IS NULL)
        ORDER BY min_exp
        DESC
            LIMIT 1
    </select>
</mapper>
